function [y1] = NeuralNetwork(x1)
%NEURALNETWORK neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 25-May-2016 22:30:53.
% 
% [y1] = NeuralNetwork(x1) takes these arguments:
%   x = 10xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [0.002263196610023;1.1875;0.317702227432591;0.222406364563278;4.01186834039786;8.02373668079573;12.0356050211936;12.0356050211936;24.0712100423872;16.0474733615915];
  x1_step1_gain = [29.7338387574751;0.280150080400214;2.68034673427184;2.5720375127257;0.164109154063286;0.0820545770316428;0.0547030513544287;0.0547030513544286;0.0273515256772143;0.0410272885158214];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [1.8367266343864769862;1.3410202450898072168;0.19199222729446796532;-0.55643434010217396324;0.28729348806020621465;-0.042956675333590751964;-0.99055634328492736529;1.0058433147223071469;1.1737287973965788712;1.8309810422942018882];
  IW1_1 = [-0.66439148463605746109 0.32862946599413378479 0.58815841839570248695 -0.43431792093470350524 0.41960201011616599098 0.53501654418269850577 0.0401891187472091585 0.63534238872590609315 -0.53466187102963458333 0.6446213741049192647;-0.58772149315466859498 0.50320489799277523524 -0.55892347599761493804 0.83080453038607871008 -0.31914538598810882064 0.56645616199077364339 -0.44879517544179459154 -0.52835926409545364013 -0.82543175143449332154 0.36423855824902084954;-0.24423849767807831457 -0.44947131509130083815 0.13265787468487647005 -0.40777092520034641243 1.0018856792715451487 -0.12269484672930179581 0.92494548461407177786 0.74582568057938236628 0.7805123051510870491 -0.53255574962266050143;0.083524880228706438468 -0.97343726664614582678 -0.86744467285465809425 0.61101341533217889967 0.59180923733761425787 0.019531847171007615804 -0.61199837656674938025 -0.4964493373671129417 -0.68902064355336412049 -0.27375675836726925949;-0.1577061494612500836 -0.1458328317213387626 1.0013030305911412299 0.23577195847855950128 0.30949480614694990788 -1.1244771567544618041 0.13653866454416896392 -0.24485849813012344756 -0.016962193641523935078 0.705353960858572826;-0.29488024433534432145 0.92054027141042393811 -0.030089281611206043082 -0.52383985058913884458 -0.76839808074826443374 -0.60513022849109054935 0.47875127503199538248 0.35461773912505695217 -0.93033884145755374462 -0.94493637688686626941;-1.4375361167592124456 -0.0065095704256278941538 -0.74683947523357840925 -0.89178835335697981268 -1.0432606551935736938 -0.068313787622534885569 -0.003622715304407545054 0.38637489482349945957 0.14488053372268736019 0.56383233569275970076;0.37298658547128510365 -0.69432372482353144072 -0.87624411795385592772 0.14537128749354952251 -0.55482927565567363715 -0.46041300158930259512 0.79771358584241280898 -0.034979884036028363603 0.19179426582467160034 -0.75003946933702292377;0.12703360142883046713 -0.18608434997458958571 -1.0631628944797038017 0.81811107709137520505 0.22031073648208765459 0.5564495720656775779 -0.38585995457074484527 0.38793715901284259173 0.70293575759402793235 0.75090317020711971896;-0.18332945243883769226 -0.1994212898527752964 0.68988875723394049722 -1.0083075446465996627 -0.88277244253085807024 0.6623176651914596258 -0.077182160184581488638 -0.94172844012799461488 -0.49498297541911734365 0.18279168936637710252];
  
  % Layer 2
  b2 = [-1.938605379422764674;-0.68835200761395365365;-0.13331385178773655364;-0.87370954798459676827;1.5358686697108374641];
  LW2_1 = [0.23771059624043910929 -0.58853417834317967028 1.1014147690804276802 0.7081229109063128524 -0.26636203725514345786 -1.1382644229333966912 1.6578360451669758024 -0.36364873757244647878 0.043042365453436488842 0.95407749486821602503;0.61211302365648367907 -0.4942470050848524199 -0.60168413689292832291 0.023822439661299585345 0.85823253695750745251 0.53255551410547774527 -0.77253439346898755691 -0.28244622767564647736 -0.26097149540897518483 -0.46717008009819532832;-0.55909518744714303828 -0.97503700436423401676 0.33107415043186194659 -0.51784533634810514524 0.021009076746221891363 -0.32237455051724617228 -0.27031271688344332693 0.22883219599186915838 0.10925701535794414554 -0.95840183258543865108;-0.87535100587360603619 -0.8494559815213797993 0.8165310299620708312 0.20505940095016164659 0.03029104381168830698 0.11896558381272404059 -0.23936508320385851967 -0.56174854347371327989 0.24479438867455530215 -0.40348668073568405568;0.71792547621582514239 -0.77567369358750215547 -0.44619014929704331474 -0.30417725550745045027 -0.39405131721351671636 0.13989712094923720254 0.22333109880451518237 0.8460773399655258098 0.61596682612353814701 0.11474348919455330809];
  
  % Layer 3
  b3 = [0.0092096583566229593687;-0.15806501731876368422];
  LW3_2 = [2.7829569205935085208 -0.57200615143823396735 0.11695314683046360849 -0.34437126352994845702 -0.13457973030921746571;-2.1743945468849306124 0.6740649465924846151 0.45126291674722729397 -1.3018648331085445058 -0.66051649743202833776];
  
  % ===== SIMULATION ========
  
  % Dimensions
  Q = size(x1,2); % samples
  
  % Input 1
  xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
  
  % Layer 1
  a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);
  
  % Layer 2
  a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
  
  % Layer 3
  a3 = softmax_apply(repmat(b3,1,Q) + LW3_2*a2);
  
  % Output 1
  y1 = a3;
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n)
  nmax = max(n,[],1);
  n = bsxfun(@minus,n,nmax);
  numer = exp(n);
  denom = sum(numer,1); 
  denom(denom == 0) = 1;
  a = bsxfun(@rdivide,numer,denom);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end
