function [y1] = NeuralNetwork(x1)
%NEURALNETWORK neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 26-May-2016 13:39:15.
% 
% [y1] = NeuralNetwork(x1) takes these arguments:
%   x = 10xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [0.002263196610023;1.1875;0.317702227432591;0.222872012983379;4.01186834039786;8.02373668079573;12.0356050211936;12.0356050211936;24.0712100423872;16.0474733615915];
  x1_step1_gain = [29.7338387574751;0.252585050122346;2.68034673427184;2.57357865552875;0.208315502246209;0.104157751123104;0.0694385007487362;0.0694385007487362;0.0347192503743681;0.0520788755615521];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-1.7512778012042338194;-1.0744846581112286188;-1.5584737852269192615;-0.7500263835572674731;0.072551608364595537859;-0.046925005566284580527;0.26310108961910982917;0.90393288426510731703;1.4898541486368326314;-1.340450088222462588];
  IW1_1 = [-0.0015513699886886172293 0.63486609653361936179 0.73929369185260584985 0.65716836949119394884 -0.049066225498642639102 0.023300339106640411552 -0.12150460696327608501 0.8598391639617117832 0.76244769602918893714 -0.59857242913454711264;0.76571687412007694018 0.27012353072867278936 0.066777048037516342771 1.4011833141328171592 0.99038214326683560174 1.1784739097211593961 1.0614764179753368722 0.49105887521620217306 1.2763302769760216382 0.45824464801021896898;0.30298874790669028112 0.13896615048422425454 -2.3972741750450881071 0.10549553207535647403 -0.34264528042694231136 0.93739069292168486491 0.90982221801638274439 0.90527184960759599086 0.63619921808030532873 -0.038060843884319649211;1.1336507856960733598 -1.0053540404302769851 0.021855310189281957484 0.35005831911386237065 -0.40442807508200717681 -0.11997111314003261473 0.34625619008896241224 0.37625503785765607168 -0.26816519944962347033 1.1439010950960324386;-0.43292154668257826211 1.4913010211166082275 -0.81465574020174191805 -0.53958988217595882375 -0.84349903037653151117 -0.49398335389992487077 -0.75477447281100507048 0.60065089407946392619 -0.35067155960387091929 0.83001251997930036719;0.75176074813721160961 -0.059467491029669160285 -0.97068067045306660745 0.12224297751867982398 0.38038840429895798279 -0.61010486530916052672 0.18452460269252476954 0.79955841350478362717 -0.69342802914473422593 0.8038396313867549603;0.79842910830261348831 1.3872561188539662691 -0.32893089338525938192 -0.20851681973795302416 0.91064512651956763811 0.57378426242223923293 0.64517594546129064526 0.48982313470923088961 0.22232915639906966621 -0.41965539461303769109;0.70832220828002412372 -0.056932237469113938788 0.83434119316130894717 1.0736752760820753583 0.64299605316102703689 0.15642130959591701855 -0.10725088886200845328 0.30727243086192540522 0.26801823528642443328 -0.66616920622843200928;0.77788363197825094453 -0.56708881667732979892 0.15564050779245156009 -0.16490891397163062737 0.53468197433062114587 -0.99972203160715311654 -0.57699508090056872422 0.33351422934284669086 0.50191445522660660394 0.17721982179220965858;-0.27078543069064653359 -0.0035667183350066647418 -0.41147328839914321108 0.58313893132086502824 -1.2304749903490854734 -0.60790368654590121178 -0.90898207045619516808 -1.3151919904747413348 -1.4392211138518409275 -0.25438335518314186823];
  
  % Layer 2
  b2 = [-1.8913609688237944528;0.85825322752745281107;-0.64659038477621710861;-1.0120533481221130057;-1.8454053452315875017];
  LW2_1 = [0.52530678238280203995 -1.0851263758922455871 0.010538665359457279058 0.37606299817359284399 -0.016961993254657616037 -1.0832742276489069067 0.096025264952817018793 0.61081474477696318104 0.28409746479979380851 -1.0179927598833233837;-0.35828050816979911675 0.24384703838993232461 0.56980039332204845959 0.67010867627007608682 -0.91849938256774132928 0.93096793102930108788 0.11179607097887152289 0.80446900580194713459 -0.56377329660238439946 -0.66931423463456440892;0.3112121834308081425 -1.2615880498891238748 2.0474295239089133069 -1.0062602487016365505 -1.1360329863205149703 0.11533035349250259083 -0.84714334876564989507 0.1140738134729505221 -0.27979734951238249829 -0.94668182864897854056;-0.16702188436942788652 1.158568746978400732 0.012162289369224746002 -0.28952990743332551737 0.70670738251098519367 -0.37722993011309657874 0.25178333090336907363 0.3357736706305661234 0.17302622129522460259 0.47648394507664287856;-0.45867830696020323034 0.52093923134082553705 0.79288368439965473122 -0.1702719307933946713 -0.39871410493059439295 -0.22760469484873394053 -0.5700562507907320775 -0.19253214039680871528 -0.75041967296438782942 -0.4503522762778595645];
  
  % Layer 3
  b3 = [-0.1208252902377384419;0.13082724335606552013];
  LW3_2 = [1.2521416924691317618 0.44596414945496454241 2.5836605025630263732 0.3757155563204164217 -0.03898973168777945808;-1.0084415400364701298 -0.84335089788695594137 -2.2842560153749591478 0.49135216596548259016 0.4816647495655904665];
  
  % ===== SIMULATION ========
  
  % Dimensions
  Q = size(x1,2); % samples
  
  % Input 1
  xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
  
  % Layer 1
  a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);
  
  % Layer 2
  a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
  
  % Layer 3
  a3 = softmax_apply(repmat(b3,1,Q) + LW3_2*a2);
  
  % Output 1
  y1 = a3;
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n)
  nmax = max(n,[],1);
  n = bsxfun(@minus,n,nmax);
  numer = exp(n);
  denom = sum(numer,1); 
  denom(denom == 0) = 1;
  a = bsxfun(@rdivide,numer,denom);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end
